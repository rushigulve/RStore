{% extends 'shop/basic.html' %}
{% block title %} {{product.product_name}} {% endblock %}
{% block body %} 
<div class="container my-4">
<div class="row">
<div class="col md-2">
    <div class="row">
<img src="/media/{{product.image}}">
</div>
<button class="btn btn-primary cart my-4 mx-2">Buy Now</button>
<button class="btn btn-primary cart mx-4 cart" id="cart{{product.id}}">Add to Cart</button>
</div>
<div class="col md-2">
    <h1>{{product.product_name}}</h1>
    {{product.description}}
</div>
</div>
</div>
{% endblock %}
{% block jss %}
<script>
    if(localStorage.getItem('cart')==null){
      var cart={};
    }
    else{
      cart=JSON.parse(localStorage.getItem('cart'));
      document.getElementById('cart').innerHTML=Object.keys(cart).length;
    }
    
    $('.cart').click(function(){
    var idstr=this.id.toString();
    if(cart[idstr]==undefined){
      cart[idstr]=1;
    }
    else{
      cart[idstr]=cart[idstr]+1;
    
    }
    localStorage.setItem('cart',JSON.stringify(cart));
    });
</script>    
{% endblock %}